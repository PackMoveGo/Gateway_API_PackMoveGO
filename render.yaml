services:
  - type: web
    name: pack-go-movers-api
    env: node
    repo: https://github.com/SereneAura2/PackMoveGO-API
    buildCommand: npm install && npm run build
    startCommand: node dist/server.js
    envVars:
      - key: NODE_ENV
        value: production
      # PORT is automatically assigned by Render - no need to set it explicitly
      - key: MONGODB_URI
        value: mongodb+srv://admin:nJPb6TTiYqfjjexI@packmovego.9yxraau.mongodb.net/?retryWrites=true&w=majority&appName=PackMoveGo
      - key: DATABASE_URL
        value: prisma+postgres://accelerate.prisma-data.net/?api_key=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqd3RfaWQiOjEsInNlY3VyZV9rZXkiOiJza191ZjVadVdRRmR1MFRJQkNNQmVaQjQiLCJhcGlfa2V5IjoiMDFLMEE3NEdZQVgzM0VNWjdFQkU0RjhUWFciLCJ0ZW5hbnRfaWQiOiJiOTQ3NWNmNGM4ZTc0MDI5OTE5Yzg0NDgyYjZmYzQ0ZDkwYmIzMDg4YWY0MDQ4ODhkNmUzMjcwYzAwZDY2N2Q0IiwiaW50ZXJuYWxfc2VjcmV0IjoiODBiNTRmNGYtZGRkMi00YWMzLWI5MjUtNTM0NTlkMDIyMWJmIn0.qC3Edzhp6cKoURWAM5mV2M6zAN24Y-iDbrcJDrhZSXg
      - key: CORS_ORIGIN
        value: https://www.packmovego.com,https://packmovego.com
      - key: CORS_METHODS
        value: GET,POST,PUT,DELETE,OPTIONS
      - key: CORS_ALLOWED_HEADERS
        value: Content-Type,Authorization
      - key: JWT_SECRET
        value: a131fba4ee1366460f9b1da9ae09e620076459338f7248af25eb09c3b9a613fc33e2b8b9a2b931246f74c6e7f7844a66214363d625e65cd138aa92e5d4691ce0
      - key: STRIPE_SECRET_KEY
        value: sk_test_51RQf97G30oP5XDB4K2qGGlvmrVakLAvI9yA1wSv7MOgKHlVP0kWF2kpX1PHkDkUDpAItx02nTTXv8nklBlt47s0k00htF0jNc5
      - key: STRIPE_PUBLISHABLE_KEY
        value: pk_test_51RQf97G30oP5XDB4roLF2jQJDPBv164W3ctElUIcrhiixITNJQOpzN24wHxJCSXRPXqNxVXv3E0BmWu6dSnjGlYL00ZqqJn1wS
      - key: EMAIL_USER
        value: support@packmovego.com
      - key: EMAIL_PASSWORD
        value: rE7WDXudXYCQscG
      - key: EMAIL_HOST
        value: 127.0.0.1
      - key: EMAIL_PORT
        value: 1025
      - key: EMAIL_SECURE
        value: false
      - key: PRODUCTION_DOMAIN
        value: https://www.packmovego.com
      - key: API_URL
        value: https://api.packmovego.com
      - key: DEBUG
        value: false
      - key: LOG_LEVEL
        value: info
      - key: RATE_LIMIT_WINDOW_MS
        value: 900000
      - key: RATE_LIMIT_MAX_REQUESTS
        value: 100
      - key: MAINTENANCE_MODE
        value: false
      - key: ALLOWED_IPS
        value: 172.58.112.138,127.0.0.1
    healthCheckPath: /api/health
    autoDeploy: true
    plan: free 